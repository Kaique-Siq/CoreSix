<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Solicitação de Serviços</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      position: relative;
      background-attachment: fixed;
    }

    body::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="80" cy="40" r="0.8" fill="rgba(255,255,255,0.15)"/><circle cx="40" cy="80" r="1.2" fill="rgba(255,255,255,0.1)"/><circle cx="90" cy="90" r="0.6" fill="rgba(255,255,255,0.2)"/></svg>') repeat;
      animation: float 20s infinite linear;
      pointer-events: none;
    }

    @keyframes float {
      0% { transform: translateY(0px); }
      100% { transform: translateY(-100px); }
    }

    .container {
      background: #fff;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      padding: 40px;
      max-width: 600px;
      width: 100%;
      z-index: 1;
      position: relative;
    }

    h1 {
      text-align: center;
      font-size: 32px;
      margin-bottom: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
    }

    h1 svg {
      width: 36px;
      height: 36px;
      color: #667eea;
      animation: rotate 8s linear infinite;
    }

    @keyframes rotate {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .pergunta {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 15px;
      color: #333;
    }

    .opcao {
      background: #f8f9fa;
      border: 2px solid #e9ecef;
      border-radius: 10px;
      padding: 15px;
      cursor: pointer;
      margin-bottom: 10px;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 16px;
    }

    .opcao svg {
      width: 24px;
      height: 24px;
      stroke: #667eea;
    }

    .opcao:hover {
      background: #e9ecef;
      border-color: #667eea;
      transform: translateX(5px);
    }

    .opcao.selecionado {
      background: #667eea;
      color: #fff;
      border-color: #667eea;
    }

    label {
      font-weight: 600;
      display: block;
      margin: 15px 0 5px;
    }

    input, textarea {
      width: 100%;
      padding: 12px;
      border-radius: 8px;
      border: 2px solid #e9ecef;
      font-size: 16px;
    }

    input:focus, textarea:focus {
      outline: none;
      border-color: #667eea;
    }

    .btn-enviar {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: #fff;
      border: none;
      border-radius: 10px;
      padding: 15px;
      width: 100%;
      font-size: 16px;
      font-weight: 600;
      margin-top: 20px;
      cursor: pointer;
    }

    .btn-enviar:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }

    .loading, .sucesso {
      text-align: center;
      display: none;
    }

    .loading.ativo, .sucesso.ativo {
      display: block;
    }

    .spinner {
      border: 4px solid #f3f3f3;
      border-top: 4px solid #667eea;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 0 auto 15px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .whatsapp-btn {
      background: #25D366;
      color: white;
      padding: 15px;
      text-decoration: none;
      display: inline-block;
      border-radius: 8px;
      font-weight: 600;
      margin-top: 20px;
      transition: transform 0.3s;
    }

    .whatsapp-btn:hover {
      transform: scale(1.05);
    }

    .error-msg {
      color: #ff4444;
      font-size: 14px;
      margin-top: 5px;
      display: none;
    }
  </style>
</head>
<body>
  <div class="container" id="main-container">
    <h1>
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
      </svg>
      Solicitação de Serviços
    </h1>

    <div id="etapa-servico">
      <div class="pergunta">Qual serviço você deseja solicitar?</div>

      <div class="opcao" data-servico="site">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4h18v16H3z M3 8h18"/></svg>
        Criação de Site
      </div>

      <div class="opcao" data-servico="backup">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4h16v16H4z M4 12h16"/></svg>
        Backup & Segurança
      </div>

      <div class="opcao" data-servico="manutencao">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12h18M12 3v18"/></svg>
        Manutenção
      </div>

      <div class="opcao" data-servico="marketing">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v18l15-9L5 3z"/></svg>
        Campanha de Marketing
      </div>
    </div>

    <div id="formulario"></div>

    <div class="loading" id="loading">
      <div class="spinner"></div>
      <p>Enviando solicitação...</p>
    </div>

    <div class="sucesso" id="sucesso">
      <h2>✅ Solicitação enviada com sucesso!</h2>
      <p>Você pode entrar em contato diretamente conosco clicando no botão abaixo:</p>
      <a class="whatsapp-btn" id="whatsappLink" target="_blank">Entrar em contato via WhatsApp</a>
      <p style="margin-top:10px;font-size:14px;opacity:0.8;">(A página será recarregada automaticamente em 5 segundos)</p>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxZ7ulwCu6AQJ43ZXR1_hHzBev9R3g2W6GYC46UGeiNyt5AOv88Izh_ldGLzHGLH2TM/exec';
      const etapaServico = document.getElementById("etapa-servico");
      const formularioDiv = document.getElementById("formulario");

      document.querySelectorAll(".opcao").forEach(opcao => {
        opcao.addEventListener("click", () => {
          document.querySelectorAll(".opcao").forEach(o => o.classList.remove("selecionado"));
          opcao.classList.add("selecionado");
          gerarFormulario(opcao.dataset.servico);
        });
      });

      function gerarFormulario(servico) {
        let campos = `
          <label>Nome completo:</label>
          <input type="text" id="nome" required>

          <label>WhatsApp/Telefone:</label>
          <input type="tel" id="telefone" placeholder="(00) 00000-0000" required>

          <label>E-mail (opcional):</label>
          <input type="email" id="email">
          <div class="error-msg" id="email-erro">Digite um e-mail válido</div>
        `;

        if (servico === "site") {
          campos += `
            <label>Tipo de site:</label>
            <input type="text" id="tipoSite">

            <label>Prazo desejado:</label>
            <input type="text" id="prazoSite">
          `;
        } else if (servico === "backup") {
          campos += `
            <label>Tipo de sistema/empresa:</label>
            <input type="text" id="tipoSistema">
            <label>Quantidade de dispositivos/estações:</label>
            <input type="text" id="qtdDispositivos">
            <label>Nível de proteção desejado:</label>
            <input type="text" id="nivelProtecao">
          `;
        } else if (servico === "marketing") {
          campos += `
            <label>Objetivo principal:</label>
            <input type="text" id="objetivoMarketing">
            <label>Plataforma desejada:</label>
            <input type="text" id="plataformaMarketing">
          `;
        } else if (servico === "manutencao") {
          campos += `
            <label>Tipo de aparelho:</label>
            <input type="text" id="tipoAparelho">
            <label>Problema relatado:</label>
            <input type="text" id="problemaAparelho">
          `;
        }

        campos += `<button class="btn-enviar" onclick="enviar('${servico}')">Enviar Solicitação</button>`;
        formularioDiv.innerHTML = campos;
      }

      window.enviar = async (servico) => {
        const nome = document.getElementById("nome").value.trim();
        const telefone = document.getElementById("telefone").value.trim();
        const email = document.getElementById("email").value.trim();
        const emailErro = document.getElementById("email-erro");

        if (email && !/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(email)) {
          emailErro.style.display = "block";
          return;
        } else {
          emailErro.style.display = "none";
        }

        if (!nome || !telefone) {
          alert("Por favor, preencha nome e telefone!");
          return;
        }

        etapaServico.style.display = "none";
        formularioDiv.style.display = "none";
        document.getElementById("loading").classList.add("ativo");

        const dados = {
          nome,
          telefone,
          email: email || "Não informado",
          servico,
          data: new Date().toLocaleString("pt-BR")
        };

        if (servico === "site") {
          dados.tipoSite = document.getElementById("tipoSite").value;
          dados.prazo = document.getElementById("prazoSite").value;
        } else if (servico === "backup") {
          dados.tipoSistema = document.getElementById("tipoSistema").value;
          dados.qtdDispositivos = document.getElementById("qtdDispositivos").value;
          dados.nivelProtecao = document.getElementById("nivelProtecao").value;
        } else if (servico === "marketing") {
          dados.objetivo = document.getElementById("objetivoMarketing").value;
          dados.plataforma = document.getElementById("plataformaMarketing").value;
        } else if (servico === "manutencao") {
          dados.aparelho = document.getElementById("tipoAparelho").value;
          dados.problema = document.getElementById("problemaAparelho").value;
        }

        await fetch(SCRIPT_URL, {
          method: "POST",
          mode: "no-cors",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(dados)
        });

        document.getElementById("loading").classList.remove("ativo");
        document.getElementById("sucesso").classList.add("ativo");

        const mensagem = encodeURIComponent("Enviei uma solicitação de serviço, gostaria de fazer um orçamento.");
        document.getElementById("whatsappLink").href = `https://wa.me/5519981449236?text=${mensagem}`;

        setTimeout(() => {
          location.reload();
        }, 5000);
      };

      // Máscara de telefone
      document.addEventListener("input", e => {
        if (e.target.id === "telefone") {
          let v = e.target.value.replace(/\D/g, "");
          if (v.length > 11) v = v.slice(0, 11);
          v = v.replace(/^(\d{2})(\d)/g, "($1) $2");
          v = v.replace(/(\d)(\d{4})$/, "$1-$2");
          e.target.value = v;
        }
      });
    });
  </script>
</body>
</html>
