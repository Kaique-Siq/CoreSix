<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário de Manutenção</title>
    <style>
        /* ===== Reset ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        /* ===== Container ===== */
        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 40px;
            max-width: 500px;
            width: 100%;
        }

        /* ===== Título com Ícone Animado ===== */
        h1 {
            margin-bottom: 40px;
            text-align: center;
            font-size: 32px;
            font-weight: 800;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            letter-spacing: -0.5px;
        }

        h1 .title-icon {
            width: 36px;
            height: 36px;
            color: #667eea;
            filter: drop-shadow(0 2px 4px rgba(102,126,234,0.2));
            animation: rotateGear 8s linear infinite;
        }

        @keyframes rotateGear {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        h1 .title-text {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        h1 .solicit {
            color: #2c3e50;
        }

        h1 .acoes {
            color: #667eea;
        }

        /* ===== Caixas de Perguntas ===== */
        .caixa {
            margin-bottom: 30px;
        }

        .caixa.visivel {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeIn 0.5s forwards;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .caixa.hidden {
            display: none;
        }

        .pergunta {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
        }

        .opcoes {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .opcao {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .opcao:hover {
            background: #e9ecef;
            border-color: #667eea;
            transform: translateX(5px);
        }

        .opcao.selecionado {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .opcao svg {
            width: 24px;
            height: 24px;
            flex-shrink: 0;
        }

        /* ===== Resumo ===== */
        .resumo {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .resumo h2 {
            color: #667eea;
            font-size: 20px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .resumo h2 svg {
            width: 24px;
            height: 24px;
        }

        .resumo-item {
            margin-bottom: 10px;
            padding: 10px;
            background: white;
            border-radius: 5px;
        }

        .resumo-item strong {
            color: #667eea;
        }

        /* ===== Formulário de Contato ===== */
        .form-contato {
            margin-top: 20px;
            padding: 20px;
            background: white;
            border-radius: 10px;
        }

        .form-contato label {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }

        .form-contato label svg {
            width: 18px;
            height: 18px;
        }

        .form-contato input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 16px;
            margin-bottom: 15px;
            transition: border-color 0.3s;
        }

        .form-contato input:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-contato input.error {
            border-color: #ff4444;
        }

        .error-msg {
            color: #ff4444;
            font-size: 14px;
            margin-top: -10px;
            margin-bottom: 10px;
        }

        /* ===== Botão Enviar ===== */
        .btn-enviar {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 10px;
            padding: 15px 30px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-enviar svg {
            width: 20px;
            height: 20px;
        }

        .btn-enviar:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-enviar:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        /* ===== Loading ===== */
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .loading.ativo {
            display: block;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ===== Sucesso ===== */
        .sucesso {
            display: none;
            text-align: center;
            padding: 30px;
            background: #d4edda;
            border-radius: 10px;
            color: #155724;
        }

        .sucesso.ativo {
            display: block;
        }

        .sucesso h2 {
            color: #155724;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .sucesso h2 svg {
            width: 32px;
            height: 32px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>
            <svg class="title-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
            </svg>
            <div class="title-text">
                <span class="solicit">Solicit</span><span class="acoes">ações</span>
            </div>
        </h1>

        <div id="formulario">
            <!-- Caixa 1: Tipo de Aparelho -->
            <div class="caixa visivel" id="caixa1">
                <div class="pergunta">Qual aparato tecnológico?</div>
                <div class="opcoes" id="opcoes1">
                    <div class="opcao" data-valor="celular">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z" />
                        </svg>
                        Celular
                    </div>
                    <div class="opcao" data-valor="computador">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                        </svg>
                        Computador
                    </div>
                    <div class="opcao" data-valor="impressora">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z" />
                        </svg>
                        Impressora
                    </div>
                    <div class="opcao" data-valor="caixa-som">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" />
                        </svg>
                        Caixa de som
                    </div>
                    <div class="opcao" data-valor="outros">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4" />
                        </svg>
                        Outros
                    </div>
                </div>
            </div>

            <!-- Caixa 2: Tipo de Manutenção -->
            <div class="caixa hidden" id="caixa2">
                <div class="pergunta">Qual manutenção você precisa?</div>
                <div class="opcoes" id="opcoes2"></div>
            </div>

            <!-- Resumo e Formulário de Contato -->
            <div class="resumo hidden" id="resumo">
                <h2>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" />
                    </svg>
                    Resumo da Solicitação
                </h2>
                <div class="resumo-item">
                    <strong>Aparelho:</strong> <span id="resumo-aparelho"></span>
                </div>
                <div class="resumo-item">
                    <strong>Problema:</strong> <span id="resumo-problema"></span>
                </div>

                <div class="form-contato">
                    <label for="nomeCliente">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                        </svg>
                        Nome completo:
                    </label>
                    <input type="text" id="nomeCliente" placeholder="Seu nome" required>

                    <label for="telefoneCliente">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                        </svg>
                        WhatsApp/Telefone:
                    </label>
                    <input type="tel" id="telefoneCliente" placeholder="(00) 00000-0000" required>
                    <div class="error-msg hidden" id="errorTelefone">Por favor, digite um telefone válido</div>

                    <label for="emailCliente">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                        </svg>
                        E-mail (opcional):
                    </label>
                    <input type="email" id="emailCliente" placeholder="seu@email.com">
                </div>

                <button class="btn-enviar" id="btnEnviar">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                    </svg>
                    Enviar Solicitação
                </button>
            </div>
        </div>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p style="margin-top: 15px;">Enviando solicitação...</p>
        </div>

        <div class="sucesso" id="sucesso">
            <h2>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                Solicitação Enviada!
            </h2>
            <p>Recebemos sua solicitação e entraremos em contato em breve!</p>
        </div>
    </div>

    <script>
        const manutencoes = {
            celular: [
                'Tela quebrada',
                'Áudio',
                'Botão',
                'Acidente doméstico (água, queda, etc.)',
                'Bateria',
                'Sinal/conectividade',
                'Outro'
            ],
            computador: [
                'Tela/monitor',
                'Teclado',
                'Mouse/touchpad',
                'Bateria',
                'Lentidão',
                'Vírus/malware',
                'HD/SSD',
                'Outro'
            ],
            impressora: [
                'Não imprime',
                'Atolamento de papel',
                'Vazamento de tinta',
                'Problema de conexão',
                'Configuração',
                'Outro'
            ],
            'caixa-som': [
                'Sem som',
                'Som distorcido',
                'Problema de conexão',
                'Bateria',
                'Configuração',
                'Outro'
            ],
            outros: [
                'Manutenção preventiva',
                'Configuração',
                'Suporte técnico',
                'Outro problema'
            ]
        };

        let selecoes = {
            aparelho: '',
            problema: '',
            nome: '',
            telefone: '',
            email: ''
        };

        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxZ7ulwCu6AQJ43ZXR1_hHzBev9R3g2W6GYC46UGeiNyt5AOv88Izh_ldGLzHGLH2TM/exec';

        // Caixa 1 - Seleção de aparelho
        document.querySelectorAll('#opcoes1 .opcao').forEach(opcao => {
            opcao.addEventListener('click', function() {
                document.querySelectorAll('#opcoes1 .opcao').forEach(o => o.classList.remove('selecionado'));
                this.classList.add('selecionado');
                
                const valor = this.dataset.valor;
                selecoes.aparelho = this.textContent.trim();
                
                mostrarCaixa2(valor);
            });
        });

        function mostrarCaixa2(tipoAparelho) {
            const caixa2 = document.getElementById('caixa2');
            const opcoes2 = document.getElementById('opcoes2');
            
            opcoes2.innerHTML = '';
            
            manutencoes[tipoAparelho].forEach(manutencao => {
                const div = document.createElement('div');
                div.className = 'opcao';
                div.textContent = manutencao;
                div.addEventListener('click', function() {
                    document.querySelectorAll('#opcoes2 .opcao').forEach(o => o.classList.remove('selecionado'));
                    this.classList.add('selecionado');
                    selecoes.problema = this.textContent.trim();
                    mostrarResumo();
                });
                opcoes2.appendChild(div);
            });
            
            caixa2.classList.remove('hidden');
            caixa2.classList.add('visivel');
            document.getElementById('resumo').classList.add('hidden');
        }

        function mostrarResumo() {
            document.getElementById('resumo-aparelho').textContent = selecoes.aparelho;
            document.getElementById('resumo-problema').textContent = selecoes.problema;
            document.getElementById('resumo').classList.remove('hidden');
        }

        // Máscara de telefone
        document.getElementById('telefoneCliente').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length <= 11) {
                value = value.replace(/^(\d{2})(\d)/g, '($1) $2');
                value = value.replace(/(\d)(\d{4})$/, '$1-$2');
            }
            e.target.value = value;
        });

        document.getElementById('btnEnviar').addEventListener('click', async function() {
            const nome = document.getElementById('nomeCliente').value.trim();
            const telefone = document.getElementById('telefoneCliente').value.trim();
            const email = document.getElementById('emailCliente').value.trim();
            
            if (!nome || !telefone) {
                alert('Por favor, preencha seu nome e telefone!');
                return;
            }
            
            const telefoneNumeros = telefone.replace(/\D/g, '');
            if (telefoneNumeros.length < 10) {
                document.getElementById('telefoneCliente').classList.add('error');
                document.getElementById('errorTelefone').classList.remove('hidden');
                return;
            }
            
            selecoes.nome = nome;
            selecoes.telefone = telefone;
            selecoes.email = email;

            document.getElementById('formulario').style.display = 'none';
            document.getElementById('loading').classList.add('ativo');

            try {
                const dataAtual = new Date().toLocaleString('pt-BR');
                
                const dadosParaEnviar = {
                    nome: nome,
                    telefone: telefone,
                    email: email || 'Não informado',
                    aparelho: selecoes.aparelho,
                    problema: selecoes.problema,
                    data: dataAtual
                };

                const response = await fetch(SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(dadosParaEnviar)
                });

                document.getElementById('loading').classList.remove('ativo');
                document.getElementById('sucesso').classList.add('ativo');

                setTimeout(() => {
                    location.reload();
                }, 3000);

            } catch (error) {
                console.error('Erro:', error);
                document.getElementById('loading').classList.remove('ativo');
                document.getElementById('sucesso').classList.add('ativo');
                
                setTimeout(() => {
                    location.reload();
                }, 3000);
            }
        });
    </script>
</body>
</html>